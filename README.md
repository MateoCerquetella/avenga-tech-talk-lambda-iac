Here's a structured prompt for your software engineering task:

---

**Build an Image Recognition App using Serverless and AWS**

**Objective:**  
Develop a serverless application in JavaScript that processes a given image and identifies its contents using AI. The app should return both the processed image and the AI-generated response.

---

**Requirements:**

1. **Upload and Storage:**

   - Use **Amazon S3** as a storage solution for image uploads.
   - Ensure secure storage with appropriate access policies for public and private access.

2. **Processing Logic:**

   - Leverage **AWS Lambda** to handle the backend logic for image processing.
   - Use **AWS Rekognition** (or another AI service, such as Amazon SageMaker or OpenAI's API) to analyze the image and determine its contents.

3. **Workflow Automation:**

   - Implement an **API Gateway** to trigger Lambda functions via HTTP requests.
   - Integrate **AWS Step Functions** if the workflow requires multiple steps like preprocessing, AI analysis, and response handling.

4. **Output Requirements:**

   - Return the original image alongside the AI-generated description of the image contents.
   - Provide the response in a structured JSON format with the following fields:
     - `image_url`: URL of the image stored in S3.
     - `analysis`: Textual description of the image generated by the AI.

5. **User Experience:**

   - Allow users to upload images through a simple frontend (optional).
   - Provide clear error handling for invalid inputs, unsupported formats, or processing failures.

6. **Security and Scalability:**
   - Ensure the app adheres to best practices for securing S3 buckets and API Gateway endpoints.
   - Enable monitoring and logging using **AWS CloudWatch** for debugging and performance optimization.
   - Make the application scalable by leveraging AWS Lambda's ability to handle dynamic loads.

---

**Sample Workflow:**

1. **Frontend (optional):** User uploads an image via a web interface or directly via an API.
2. **S3 Upload:** The image is uploaded to an S3 bucket.
3. **Trigger Processing:** S3 triggers a Lambda function using event notifications.
4. **Image Analysis:** Lambda uses AWS Rekognition or an AI model to process the image.
5. **Response Storage:** Lambda saves the response (e.g., JSON analysis) to another S3 bucket or directly sends it to the user via the API Gateway.
6. **Return Output:** The application provides the user with the image URL and the AI response.

---

**Tech Stack:**

- **Frontend (optional):** React, Svelte, or plain HTML/CSS/JavaScript.
- **Backend:** AWS Lambda, API Gateway, S3, AWS Rekognition (or SageMaker).
- **Storage:** Amazon S3.
- **Monitoring:** AWS CloudWatch.
- **Development Tools:** AWS SAM or Serverless Framework for infrastructure setup.

---
